<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Wall</title>
       <link href="https://fonts.googleapis.com/css?family=Caveat|Montserrat:400,600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: Caveat;
      margin: 20px;
      background: #f8f9fa;
    }
    h1 {
      text-align: center;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-top: 20px;
    }
    .column {
      padding: 10px;
      border-radius: 10px;
      min-height: 300px;
    }
    .fiction { background: #d6eaff; }
    .nonfiction { background: #fff9d6; }
    .business { background: #d6ffd6; }
    .math { background: #ffd6d6; }
    .book {
      background: white;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .book h3 {
      margin: 0 0 5px;
    }
    .notes {
      margin-top: 8px;
    }
    .note {
      background: #f1f1f1;
      padding: 5px 8px;
      margin: 4px 0;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: grab;
    }
    .note.dragging {
      opacity: 0.1;
    }
    .note button {
      border: none;
      background: none;
      cursor: pointer;
      font-size: 14px;
      margin-left: 6px;
    }
    .controls {
      margin-top: 8px;
    }
    textarea {
      width: 88%;
      height: 40px;
      border-radius: 6px;
      border: 1px solid #ccc;
      padding: 5px;
    }
    .save-btn {
      display: block;
      margin: 20px auto;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      background: #007bff;
      color: white;
      cursor: pointer;
    }
    .save-btn:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
    <br>
  <h1>üìö My Library </h1>
<br>
  
  <div class="grid">
    <!-- Fiction -->
    <div class="column fiction">
      <h2>Fiction</h2>
      <div class="book" data-title="Madame Bovary">
        <h3>Madame Bovary</h3>
        <small>Novel by Gustave Flaubert</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="Notes from Underground">
        <h3>Notes from Underground</h3>
        <small>Novel by Fyodor Dostoevsky</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="The Merchant of Venice">
        <h3>The Merchant of Venice</h3>
        <small>Play by William Shakespeare</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="Jacques the Fatalist">
        <h3>Jacques the Fatalist</h3>
        <small>Novel by Denis Diderot</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
    </div>
    
    <!-- Non-Fiction -->
    <div class="column nonfiction">
      <h2>Non-Fiction</h2>
      <div class="book" data-title="Fooled by Randomness">
        <h3>Fooled by Randomness</h3>
        <small>The Hidden Role of Chance in Life and Markets ‚Äî Nassim Taleb</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="Life 3.0">
        <h3>Life 3.0</h3>
        <small>Being Human in the Age of AI ‚Äî Max Tegmark</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="A Beautiful Math">
        <h3>A Beautiful Math</h3>
        <small>Game Theory & Nature ‚Äî Tom Siegfried</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="The Art of Game Design">
        <h3>The Art of Game Design</h3>
        <small>The Book of Lenses ‚Äî Jesse Schell</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
    </div>
    
    <!-- Business -->
    <div class="column business">
      <h2>Business</h2>
      <div class="book" data-title="The Right Game">
        <h3>The Right Game</h3>
        <small>Use Game Theory to Shape Strategy ‚Äî Brandenburger & Nalebuff</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="The Art of Strategy">
        <h3>The Art of Strategy</h3>
        <small>Guide to Success ‚Äî Dixit & Nalebuff</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="Economics">
        <h3>Economics</h3>
        <small>A Very Short Introduction ‚Äî Partha Dasgupta</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="Macroeconomics">
        <h3>Macroeconomics</h3>
        <small>N. Gregory Mankiw</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
    </div>
    
    <!-- Mathematics -->
    <div class="column math">
      <h2>Mathematics</h2>
      <div class="book" data-title="Theory of Games and Economic Behavior">
        <h3>Theory of Games and Economic Behavior</h3>
        <small>Von Neumann & Morgenstern</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="Reinforcement Learning">
        <h3>Reinforcement Learning</h3>
        <small>An Introduction ‚Äî Sutton & Barto</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="Introduction to Stochastic Dynamic Programming">
        <h3>Introduction to Stochastic Dynamic Programming</h3>
        <small>Sheldon Ross</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
      <div class="book" data-title="Game Theory">
        <h3>Game Theory</h3>
        <small>Maschler, Solan, Zamir</small>
        <div class="notes"></div>
        <div class="controls">
          <textarea placeholder="Add note..."></textarea>
          <button onclick="addNote(this)">‚ûï</button>
        </div>
      </div>
    </div>
  </div>
  <br>
    <button class="save-btn" onclick="saveCSV()">üíæ Save All Notes as CSV</button>


  <script>
    function addNote(button) {
      const book = button.closest('.book');
      const textarea = book.querySelector('textarea');
      const text = textarea.value.trim();
      if (!text) return;
      const note = createNoteElement(text);
      book.querySelector('.notes').appendChild(note);
      textarea.value = "";
      saveNotes(book);
    }

    function createNoteElement(text, starred=false) {
      const div = document.createElement('div');
      div.className = 'note';
      div.draggable = true;
      div.innerHTML = `<span>${text}</span>
        <div>
          <button class="star">${starred ? "‚≠ê" : "‚òÜ"}</button>
          <button class="delete">‚úñ</button>
        </div>`;
      
      div.querySelector('.star').onclick = function() {
        starred = !starred;
        this.textContent = starred ? "‚≠ê" : "‚òÜ";
        const parent = div.parentNode;
        if (starred) parent.prepend(div);
        saveNotes(div.closest('.book'));
      };
      div.querySelector('.delete').onclick = function() {
        div.remove();
        saveNotes(div.closest('.book'));
      };
      
      div.addEventListener('dragstart', () => div.classList.add('dragging'));
      div.addEventListener('dragend', () => {
        div.classList.remove('dragging');
        saveNotes(div.closest('.book'));
      });
      div.addEventListener('dblclick', () => {
        const span = div.querySelector('span');
        const newText = prompt("Edit note:", span.textContent);
        if (newText !== null) {
          span.textContent = newText;
          saveNotes(div.closest('.book'));
        }
      });
      return div;
    }

    document.querySelectorAll('.notes').forEach(container => {
      container.addEventListener('dragover', e => {
        e.preventDefault();
        const dragging = document.querySelector('.dragging');
        const after = [...container.querySelectorAll('.note:not(.dragging)')]
          .find(n => e.clientY <= n.offsetTop + n.offsetHeight/2);
        if (after) container.insertBefore(dragging, after);
        else container.appendChild(dragging);
      });
    });

    function saveNotes(book) {
      const title = book.dataset.title;
      const notes = [...book.querySelectorAll('.note')].map(n => {
        return {text: n.querySelector('span').textContent, starred: n.querySelector('.star').textContent==="‚≠ê"};
      });
      localStorage.setItem('notes_' + title, JSON.stringify(notes));
    }

    function loadNotes() {
      document.querySelectorAll('.book').forEach(book => {
        const saved = localStorage.getItem('notes_' + book.dataset.title);
        if (saved) {
          JSON.parse(saved).forEach(n => {
            const note = createNoteElement(n.text, n.starred);
            book.querySelector('.notes').appendChild(note);
          });
        }
      });
    }

    function saveCSV() {
      let rows = [["Book","Note","Starred"]];
      document.querySelectorAll('.book').forEach(book => {
        const title = book.dataset.title;
        book.querySelectorAll('.note').forEach(n => {
          rows.push([title, n.querySelector('span').textContent, n.querySelector('.star').textContent==="‚≠ê"]);
        });
      });
      const csv = rows.map(r => r.map(v => `"${String(v).replace(/"/g,'""')}"`).join(",")).join("\n");
      const blob = new Blob([csv], {type:"text/csv"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "notes.csv";
      a.click();
    }

    loadNotes();
  </script>
</body>
</html>
