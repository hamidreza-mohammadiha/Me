<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BTC Scenario Simulator (Sep 22, 2025 → Jan 1, 2026)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Chart.js + time scale adapter -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3"></script>
  <style>
    :root{
      --bg:#0f1220; --panel:#151a2e; --ink:#e9ecf5; --muted:#9aa3b2;
      --accent:#7dd3fc; --accent2:#c084fc; --good:#34d399; --bad:#f87171;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color:var(--ink); background: radial-gradient(1200px 700px at 10% -10%, #1b2140, #0f1220 60%);
      min-height:100vh; display:flex; flex-direction:column;
    }
    header, footer{
      background:linear-gradient(90deg, #12172b, #161b31);
      border-bottom:1px solid #222948; border-top:1px solid #222948;
      padding:16px 20px;
    }
    header h1{ margin:0; font-size:20px; letter-spacing:.3px }
    header p{ margin:6px 0 0; color:var(--muted); font-size:13px }
    main{ width:100%; max-width:1100px; margin:22px auto; padding:0 16px; flex:1; }
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
      border:1px solid #232a4b; border-radius:14px; padding:18px; box-shadow:10px 10px 28px rgba(0,0,0,.25); height: 718px;
    }
    .controls{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:12px 0 8px;
    }
    .controls select, .controls button{
      padding:10px 12px; border-radius:10px; border:1px solid #2a335c; background:#121731; color:var(--ink);
      outline:none; transition:transform .06s ease, border .2s;
    }
    .controls select:focus, .controls button:focus{ border-color:#3b4b8f }
    .controls button:hover{ transform:translateY(-1px); cursor:pointer; }
    .controls button.play{ border-color: #1f8cff; }
    .controls button.pause{ border-color: #ffbf69; }
    .controls button.reset{ border-color: #5eead4; }
    .kbd{
      font: 12px/1.3 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      background:#0e1326; border:1px solid #2a335c; padding:2px 6px; border-radius:6px; color:#c3cdf7;
    }
    .grid{ display:grid; grid-template-columns: 1.3fr .7fr; gap:18px; }
    @media (max-width: 920px){ .grid{ grid-template-columns:1fr; } }
    .desc h2{ margin:4px 0 6px; font-size:16px }
    .desc p{ margin:0 0 12px; color:var(--muted) }
    ul.scenarios{ margin:8px 0 0 1.2rem; padding:0; color:var(--muted) }
    ul.scenarios li{ margin:6px 0 }
    canvas{ background:#0c1122; border:1px solid #232a4b; border-radius:12px; }
    .legend-dot{ display:inline-block; width:10px; height:10px; border-radius:50%; margin-right:6px; transform:translateY(1px); }
    footer{ color:var(--muted); font-size:12px; }
    footer a{ color:#b7c5ff; text-decoration:none }
    footer a:hover{ text-decoration:underline }
    .pill{ display:inline-block; padding:4px 8px; border:1px solid #26305e; background:#0c132b; border-radius:999px; color:#c9d3ff; font-size:12px; }
  </style>
</head>
<body>
  <header>
    <h1>Bitcoin Scenario Simulator — Sep 22, 2025 → Jan 1, 2026</h1>
    <p>
      Start price: <span class="pill">$112,550</span> · 60-second playback · Choose a scenario and <span class="kbd">Play</span>.
    </p>
  </header>

  <main>
    <div class="grid">
      <div class="panel">
        <canvas id="chart" height="10px"></canvas>
        <div class="controls">
          <label for="scenario"><strong>Scenario:</strong></label>
          <select id="scenario">
            <option value="optimistic">Optimistic</option>
            <option value="realistic" selected>Realistic</option>
            <option value="pessimistic">Pessimistic</option>
          </select>

          <button class="play" id="btnPlay">▶ Play</button>
          <button class="pause" id="btnPause">⏸ Pause</button>
          <button class="reset" id="btnReset">⟲ Reset</button>

          <span style="margin-left:auto; color:var(--muted);">Frames: <span id="frameCount">0</span>/<span id="frameTotal">0</span></span>
        </div>
        
      </div>

      <div class="panel desc">
        <h2>About this page</h2>
        <p>
          This lightweight simulator renders a single price path per scenario using
          a geometric-Brownian-like process (drift + volatility) from
          <strong>Sep 22, 2025</strong> through <strong>Jan 1, 2026</strong>.
          It animates one day per frame over ~60 seconds.
        </p>
        <h2>Scenario assumptions</h2>
        <ul class="scenarios">
          <li><span class="legend-dot" style="background:var(--good)"></span><strong>Optimistic</strong> — net drift ≈ <em>+35%</em> across the window, relatively low daily volatility.</li>
          <li><span class="legend-dot" style="background:var(--accent)"></span><strong>Realistic</strong> — net drift ≈ <em>+10%</em>, moderate volatility.</li>
          <li><span class="legend-dot" style="background:var(--bad)"></span><strong>Pessimistic</strong> — net drift ≈ <em>−20%</em>, higher volatility.</li>
        </ul>
        <p style="margin-top:10px">
          <em>Context:</em> BTC recently traded near <strong>$112K</strong> with the year’s biggest long-side liquidations (> $1B) and macro catalysts
          (PCE, Powell) in focus; traders debated $100K retests vs rebounds — see Cointelegraph’s wrap for color.
        </p>
        <p style="font-size:12px; color:var(--muted)">
          This is an illustrative simulation, not a forecast. One randomized path per scenario is shown for clarity.
        </p>
      </div>
    </div>
  </main>

  <footer>
    Cross-checked with Cointelegraph’s “Biggest long liquidation of 2025” weekly brief (market dipped to ~$112K; >$1B liquidations; macro + politics in focus).
    <a href="https://cointelegraph.com/news/biggest-liquidation-of-2025-5-things-bitcoin-this-week" target="_blank" rel="noopener">Read source</a>.
  </footer>

  <script>
    // ---- Parameters ----
    const START_PRICE = 112550; // user-provided
    const START_DATE = new Date('2025-09-22T00:00:00Z');
    const END_DATE   = new Date('2026-01-01T00:00:00Z');

    // Duration ~60s total; frames = number of days
    const DAY_MS = 24*60*60*1000;
    const totalDays = Math.round((END_DATE - START_DATE) / DAY_MS) + 1;
    const FRAME_INTERVAL_MS = Math.round(60000 / totalDays); // ~60s total

    // Simple seeded RNG for reproducibility per scenario
    function mulberry32(a){ return function(){ var t = a += 0x6D2B79F5; t = Math.imul(t ^ t>>>15, t | 1); t ^= t + Math.imul(t ^ t>>>7, t | 61); return ((t ^ t>>>14) >>> 0) / 4294967296; } }
    const randNum = Math.floor(Math.random())
    const scenarios = {
      optimistic: { label: "Optimistic", color: "#34d399", seed: 1337, driftTotal: 0.35, dailyVol: 0.015 },
      realistic:  { label: "Realistic",  color: "#7dd3fc", seed: randNum, driftTotal: 0.10, dailyVol: 0.020 },
      pessimistic:{ label: "Pessimistic",color: "#f87171", seed: 2025, driftTotal:-0.20, dailyVol: 0.025 }
    };

    // Generate one GBM-like path for the full window
    function generatePath(scn){
      const { seed, driftTotal, dailyVol } = scn;
      const rand = mulberry32(seed);
      const days = totalDays;
      const dt = 1/365; // year fraction per day
      // Convert total drift across the window to a daily drift
      const windowYears = days/365;
      const mu_window = Math.log(1 + driftTotal); // log-return drift over window
      const mu_daily = mu_window / days; // per-day log drift approximation

      let t = new Date(START_DATE);
      let price = START_PRICE;

      const labels = [];
      const data = [];
      for(let i=0;i<days;i++){
        labels.push(new Date(t));
        data.push({x:new Date(t), y:price});
        // GBM step: S_{t+1} = S_t * exp( (mu - 0.5*sigma^2)*dt + sigma*sqrt(dt)*N(0,1) )
        const z = Math.sqrt(-2*Math.log(Math.max(rand(),1e-12))) * Math.cos(2*Math.PI*rand()); // standard normal (Box–Muller)
        const sigma = dailyVol * Math.sqrt(365); // convert dailyVol (%) to annualized-ish scaler; here we keep it simple
        const drift = (mu_daily - 0.5*(sigma**2)*dt);
        const shock = sigma*Math.sqrt(dt)*z;
        price = price * Math.exp(drift + shock);
        t = new Date(t.getTime() + DAY_MS);
      }
      return { labels, data };
    }

    // Chart setup
    const ctx = document.getElementById('chart').getContext('2d');
    const initialScenario = 'realistic';
    let activeScenario = initialScenario;
    let fullSeries = generatePath(scenarios[activeScenario]);

    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        datasets: [{
          label: scenarios[activeScenario].label,
          data: [ fullSeries.data[0] ],
          borderColor: scenarios[activeScenario].color,
          backgroundColor: "transparent",
          borderWidth: 2,
          pointRadius: 0,
          tension: 0.22
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: false,
        scales: {
          x: { type: 'time', time: { unit: 'day' }, grid: { color: 'rgba(255,255,255,0.05)' }, ticks:{ color:'#c7d2fe' } },
          y: { grid: { color: 'rgba(255,255,255,0.06)' }, ticks:{ color:'#c7d2fe',
                callback: v => '$' + Math.round(v).toLocaleString() } }
        },
        plugins: {
          legend: { labels: { color: '#dbeafe' } },
          tooltip: {
            mode: 'index', intersect:false,
            callbacks: { label: ctx => ` ${ctx.dataset.label}: $${Math.round(ctx.parsed.y).toLocaleString()}` }
          }
        }
      }
    });

    // Animation control
    let timer = null;
    let frame = 1;
    const frameTotalEl = document.getElementById('frameTotal');
    const frameCountEl = document.getElementById('frameCount');
    frameTotalEl.textContent = (fullSeries.data.length - 1).toString();

    function step(){
      if(frame >= fullSeries.data.length){
        pause(); return;
      }
      chart.data.datasets[0].data.push(fullSeries.data[frame]);
      chart.update();
      frameCountEl.textContent = frame.toString();
      frame++;
    }
    function play(){
      if(timer) return;
      timer = setInterval(step, FRAME_INTERVAL_MS);
    }
    function pause(){
      if(timer){ clearInterval(timer); timer = null; }
    }
    function reset(){
      pause();
      frame = 1;
      chart.data.datasets[0].data = [ fullSeries.data[0] ];
      chart.update();
      frameCountEl.textContent = '0';
    }
    function setScenario(key){
      activeScenario = key;
      fullSeries = generatePath(scenarios[activeScenario]);
      chart.data.datasets[0].label = scenarios[activeScenario].label;
      chart.data.datasets[0].borderColor = scenarios[activeScenario].color;
      frameTotalEl.textContent = (fullSeries.data.length - 1).toString();
      reset();
    }

    // Wire up UI
    document.getElementById('btnPlay').addEventListener('click', play);
    document.getElementById('btnPause').addEventListener('click', pause);
    document.getElementById('btnReset').addEventListener('click', reset);
    document.getElementById('scenario').addEventListener('change', (e)=> setScenario(e.target.value));

    // Start paused
    reset();
  </script>
</body>
</html>
